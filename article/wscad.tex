\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}

\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{listings}

\usepackage{todonotes}
\usepackage{xargs}
\newcommandx{\change}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}

\lstset{ %
frame=single
}


\sloppy

\title{Artigo pro Cuda Fuzzy}

% Edevaldo Braga dos Santos
% Giovane de Oliveira Torres
% Guilherme Pereira Paim
% Renan Zafalon da Silva
% Vitor Alano de Ataides

\author{Edevaldo Braga dos Santos\inst{1}, Giovane de Oliveira Torres\inst{1}, Guilherme Pereira Paim\inst{1},\\ Renan Zafalon da Silva\inst{1}, Vitor Alano de Ataides\inst{1}, Maurício Lima Pilla\inst{1}}

\address{Universidade Federal de Pelotas \\
Pelotas, RS - Brasil\\
  \email{\{edevaldo.santos,gdotorres,gppaim,renan.zafalon,vaataides,pilla\}@inf.ufpel.edu.br}
}

\begin{document}

\newcommand{\libname}{CudaFuzzy}

\maketitle

\begin{abstract}

Abstract aqui.

\end{abstract}

\begin{resumo}

Resumo aqui.

\end{resumo}

\section{Introdução}
\label{sec:introducao}

% Logica fuzzy: colocar onde? %

	Existem diversos casos onde classes de objetos não pertencem totalmente a um conjunto. Baseado nisto, Zadeh definiu a teoria dos conjuntos \textit{fuzzy}~\cite{zadeh:65}, o que visa tratar problemas de imprecisão ao classificar dados no mundo real. Os conjuntos \textit{fuzzy} possuem aplicações em sistemas de controle e de suporte à decisão, onde a descrição do problema não é feita de forma precisa~\cite{weber:03}.
	
	Utilizando-se dos conjuntos \textit{fuzzy}, tem-se a base para a lógica \textit{fuzzy}, sendo construído a partir da lógica proposicional. Com isto, os operadores foram definidos à partir dos já estabelecidos na lógica clássica, com a adição de outros para fins práticos~\cite{tanscheit:04}. Uma característica interessante que diferencia a lógica tradicional da \textit{fuzzy} é que na primeira os valores que são utilizados atendem a condição de serem verdadeiros ou falsos (0 ou 1). Já na segunda, trabalha-se com conjuntos \textit{fuzzy} -- estes podem assumir um valor que pertence ao intervalo $[0, 1]$, o que permite que um conjunto \textit{fuzzy} possa ser representado por uma infinidade de valores~\cite{klir:95}.	
	
% GPU %

	A fim de obter-se computação com bom desempenho, é importante fazer uso dos vários núcleos de processamento os quais são disponibilizados nos sistemas de computação atuais -- para poder por em prática o uso do paralelismo. Neste contexto, encaixam-se as GPUs (\textit{Graphical Processor Units}), as quais são componentes com alto poder de paralelismo~\cite{sengupta:07}. Porém, é importante ressaltar que as GPUs são reservadas a obter bom desempenho com aplicações que possuem determinadas características~\cite{owens:08} que incluem: (i) Requisitos computacionais grandes, (ii) Paralelismo nas aplicações e (iii) maior importância ao \textit{throughput} do que a latência. Destacam-se alguns exemplos práticos bem-sucedidos que utilizam CUDA:
Análise do fluxo de tráfego aéreo, através do uso do poder computacional de CUDA, foi possível reduzir o tempo de análise do tráfego aéreo nacional
de dez minutos para três segundos. Outro exemplo relevante é o ganho de desempenho em simulações moleculares NAMD(dinâmica molecular em nanoescala), o ganho de desempenho foi possível graças as arquiteturas paralelas das GPUs~\cite{nvidia:15}.

% O trabalho - Acredito que deverá ser melhor explorado esta parte! Quando os objetivos ficarem mais claros %	

	Tendo estes conceitos discutidos, o objetivo deste trabalho é descrever uma biblioteca de lógica \textit{fuzzy} voltada para GPUs, a fim de verificar como pode ser efetuado uma implementação que consiga extrair paralelismo deste tipo de arquiteturas.
	
% Discussão sobre a estrutura do artigo.

	O restante deste artigo está dividido da seguinte maneira: A seção~\ref{sec:logfuzzy} fala sobre a lógica fuzzy, que é a base para a construção deste trabalho. Na seção~\ref{sec:lib}, é descrito a implementação efetuada da biblioteca~\libname. A seção~\ref{sec:metodologia} destina-se a explicar a metodologia empregada para a execução de testes na biblioteca. A seção~\ref{sec:resultados} exibe e discute os principais resultados obtidos por este trabalho, de onde se tiram as principais conclusões, observadas na seção~\ref{sec:conclusoes}, a qual ainda mostra possíveis trabalhos futuros. Por fim, a seção~\ref{sec:trabalhos} faz uma breve discussão sobre os trabalhos relacionados ao escopo deste artigo.

\section{Lógica Fuzzy}
\label{sec:logfuzzy}

% Descrição breve, pra que serve, exemplos
Lógica fuzzy foi criada com base na teoria de conjuntos Fuzzy, a ideia principal de fuzzy é a seguinte: Um valor é verdadeiro (grau 1) ou falsos (grau 0), sendo que o grau pode variar de 0 à 1. A teoria do conjunto fuzzy foi inventada com o objetivo de oferecer ferramentas matemáticas para solucionar problemas imprecisos ou vagos. Dentre as inúmeras aplicações com lógica fuzzy, o projeto IMMO-RATE, é bastante interessante, pois ele permite análise de sustentabilidade em imóveis, considerando questões chaves específicas que utilizam a lógica fuzzy.

\subsection{Operadores Fuzzy}
Conjuntos são definidos por uma condição específica que define se um conjunto pertence ou não a um conjunto. Para exemplificar os operados em fuzzy logo abaixo foram utilizados conjuntos A e B.
Os operadores mais comuns em conjuntos fuzzy são: união 
(A\begin{math} \cup \end{math} B ={ x | x \begin{math}\in \end{math} A \begin{math}\vee \end{math} x \begin{math}\in \end{math} B) e intersecão (A \begin{math} \cap \end{math} B = 
x | x \begin{math}\in \end{math}A \begin{math}\wedge \end{math} x \begin{math}\in \end{math} B).  
%={x | x ∈ A ∧ x ∈ B}). 


% Explicação dos operadores mais comuns (talvez fazer uma correlação com a lógica proposicional / lógica comum)

\section{\libname}
\label{sec:lib}

	\libname~é o nome dado a biblioteca de lógica \textit{fuzzy} desenvolvida neste trabalho, voltada à GPU. Para o desenvolvimento, a biblioteca criada necessitou ser composta de vários operadores para trabalhar sobre os conjuntos \textit{fuzzy}. Foram escolhidas operações básicas~\cite{klir:95} para implementação, sendo estas 2 operadores AND ($\wedge$), 2 operadores OR ($\vee$) e 3 operadores NOT ($\sim$). A Figura~\ref{fig:fuzzyops} mostram os operadores implementados.
	
\begin{figure}[!h]
\centering

\[ \begin{array}{ccc}
	AND1(x, y) & = & min(x, y) \\
	AND2(x, y) & = & x * y \\
	OR1(x, y) & = & max(x, y) \\
	OR2(x, y) & = & (x + y) - (x * y)\\
	NOT1(x) & = & 1 - x \\
	NOT2(x) & = & \sqrt{1-x^2} \\
	NOT3(x) & = & \sqrt[3]{1-x^3} \\
\end{array} \]
\caption{Operações implementadas na biblioteca~\libname}
\label{fig:fuzzyops}
\end{figure}

\todo[inline]{Referenciar cada operador mostrado? Explicar mais a operação? Parece óbvio..}

Os operadores foram implementados em C, utilizando-se da biblioteca CUDA, e foram desenvolvidos como funções que recebem como argumentos um ou dois valores do tipo \texttt{double} (um para operações \texttt{NOT}, e dois para operações \texttt{AND} e \texttt{OR}), sendo estes os operandos e retornam um valor do tipo \texttt{double}, o qual é o resultado da operação. A Figura~\ref{fig:operation} exemplifica a implementação da operação \texttt{NOT3}.

\begin{figure}[!h]
\centering
\lstinputlisting[language=C, firstline=43, lastline=45, otherkeywords={inline,device}]{../lib/FuzzyLogic/d_FuzzyLogic.cu}
\caption{Código de implementação da operação de lógica \textit{fuzzy} NOT3}
\label{fig:operation}
\end{figure}

Porém, é importante observar que somente a implementação destes operadores por si só representa pouco do trabalho efetuado. Como a arquitetura alvo para esta biblioteca são as GPUs, precisou-se elaborar uma maneira de aproveitar o paralelismo disponível nestas arquiteturas. A estratégia abordada por este trabalho buscou agrupar conjuntos de operações de um mesmo tipo em um \textit{array} de instruções. Com isto, é possível executar múltiplas operações de lógica \textit{fuzzy} nos vários núcleos disponibilizados pela GPU. As operações são agrupadas em um mesmo tipo para serem executadas em paralelo devido à taxonomia destas arquiteturas, sendo elas consideradas SIMT (\textit{Single instruction multiple thread})~\cite{keckler:11}, o que indica que \change{Explicar SIMT}...

Assim, as operações são feitas sobre uma função que leva o prefixo \texttt{Bulk}. Um \texttt{Bulk} fará uma operação de lógica \textit{fuzzy} sobre um \textit{array} de operandos (Em caso de operações \texttt{BulkNOT}) ou sobre dois \textit{arrays} de operandos (Em caso de operações \texttt{BulkAND} e \texttt{BulkOR}). No caso de operações que trabalham com dois \textit{arrays}, as operações serão efetuadas de maneira correspondente nos \textit{arrays}, i.e., o primeiro operando de um \textit{array} será combinado com o primeiro operando do outro \textit{array}, gerando assim uma computação parcial da operação, sendo este o primeiro elemento do \textit{array} de resultado. Logo, quando a operação requer dois \textit{arrays} como entrada, os mesmos deverão conter o mesmo número de elementos. A Figura~\ref{fig:bulkoperation} exibe uma computação parcial da operação \texttt{BulkAND1}.

\begin{figure}[!h]
\centering
\lstinputlisting[language=C, basicstyle=\scriptsize, firstline=171, lastline=178, otherkeywords={inline,device}]{../lib/FuzzyLogic/d_BulkLogic.cu}
\caption{Código de implementação de uma única operação \texttt{BulkAND1}}
\label{fig:bulkoperation}
\end{figure}

\section{Metodologia}
\label{sec:metodologia}	

\section{Resultados e Discussão}	
\label{sec:resultados}	

\section{Conclusões e Trabalhos Futuros}
\label{sec:conclusoes}	
	
\section{Trabalhos Relacionados}
\label{sec:trabalhos}

	Existem diversas implementações relacionadas à lógica \textit{fuzzy}. Os artigos visualizados na bibliografia normalmente fazem utilização de lógica \textit{fuzzy} voltada para um tipo de problema, não descrevendo uma biblioteca genérica. Como trabalhos descritos desta forma, existe~\cite{sugeno:93}, utiliza-se lógica \textit{fuzzy} para a discussão de um metódo para modelagem qualitativa. Em~\cite{li:11}, é empregada a lógica \textit{fuzzy} para fazer o gerenciamento de energia e bateria de automóveis híbridos do tipo \textit{plug-in}.
	
	Como bibliotecas relacionadas à lógica \textit{fuzzy}, existe uma desenvolvida na linguagem Java, chamada de jFuzzyLogic~\cite{cingolani:12, cingolani:13}. Esta biblioteca é uma implementação de sistemas \textit{fuzzy} que permite projetar controladores de lógica \textit{fuzzy}. Por fim, existe a biblioteca FuzzyGPU~\cite{defour:14}, a qual é o trabalho relacionado mais próximo ao que este artigo apresenta. FuzzyGPU é uma implementação de biblioteca de aritmética \textit{fuzzy} voltada à GPUs.
 	
\bibliographystyle{sbc}
\bibliography{wscad}

\end{document}
